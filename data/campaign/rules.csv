id,trigger,conditions,script,text,options,notes
#RULESET_NAME aotd,,,,,,
sophiaEncounters,DialogOptionSelected,"$faction.id != pirates
$faction.id != luddic_path
$option == marketVisitBar
$global.aotd_sophia == false
$global.aotd_can_scientist == true","FireBest BarShuttleDownPrintDesc
BarCMD playAmbience
AddText ""You make your way inside a bar when suddenly you are approached by a woman with white hair. First thing that catches your attention is a golden mark on her face and a uniform typical for a researcher. As you consider what to say, your thoughts are interrupted by her gentle voice asking you for a drink and 5 minutes of your time""",,"aotdSophiaTalk:Follow
aotdSophiaDontTalk:Don't follow",
aotdSophiaTalk,DialogOptionSelected,$option == aotdSophiaTalk,"SaveCurrentVisual
BeginConversation sophia 
$global.aotd_sophia",Both of you sit in the bar ordering a small glass of fine booze. After a moment you hear that her name is Sophia and she is one of researchers from Galatia as you guessed it earlier. “I have heard stories about technological advancements of your faction and  I have come with a proposition for you”,aotdSophiaListen: Listen to proposition,
aotdSophiaListen,DialogOptionSelected,$option == aotdSophiaListen,,"So getting to the point, I am a seeker of knowledge, Galatia limits me with regulations, but you? You pursue knowledge without any bounds and I want to be part of it . So my question is will you allow my humble person to help you in that matter?
","aotdSophiaAgree:Accept Propostion 
aotdSophiaInfo:See her skills
aotdReturn:Decline ,and leave the bar",
aotdSophiaAgree,DialogOptionSelected,$option == aotdSophiaAgree,"SophiaAgreed  
AddTextSmall ""$personName joined your faction"" highlight",,aotdReturn: Leave the bar,
aotdSophiaInfo,DialogOptionSelected,$option == aotdSophiaInfo,"AddTextSmall ""Skill - Resourceful."" highlight
AddTextSmall  ""Decrease cost of item for initial research by 1 unit. This does not include special databanks"" highlight
",,,
aotdReturn,DialogOptionSelected,$option == aotdReturn,"EndConversation DO_NOT_FIRE
RestoreSavedVisual
BarCMD showOptions",You return to the bar.,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
aotdSophiaDontTalk,DialogOptionSelected,$option == aotdSophiaDontTalk,"BarCMD showOptions 
$global.aotd_sophia = true",,,
aotdSophiaIgnore,DialogOptionSelected,$option == aotdSophiaIgnore,"EndConversation DO_NOT_FIRE
RestoreSavedVisual
BarCMD showOptions
$global.aotd_sophia = true",,,
#RT ,,,,,,
haveGivenCore,DialogOptionSelected,$option == saic_continueGiveCore score:10000,"$global.aotd_give_core = true 
CallEvent $saic_eventRef genLootNoCore",,,
haveTakenCore,DialogOptionSelected,$option == saic_continueTakeCore score:10000,"$global.aotd_give_core = false 
CallEvent $saic_eventRef genLootWithCore",,,
,,,,,,
opScientistEncounter,DialogOptionSelected,"$faction.id == tritachyon
$option == marketVisitBar
$global.aotd_op_scientist==false
$global.aotd_can_op_scientist == true
$global.aotd_give_core == true","FireBest BarShuttleDownPrintDesc
BarCMD playAmbience
AddText ""Before you enter the bar a person that looks like an scientist interrupts you""",,opScientistFollow:Continue,
opScientistFollow,DialogOptionSelected,$option == opScientistFollow,"SaveCurrentVisual
BeginConversation opScientist 
$global.$aotd_op_scientist = true","""Ahh, it has been a while since we met. I hope you still recognize me do you ?""","scientistRecognied: Yea, I remember you 
scientistNotRecognied: I don't know who you are",
scientistRecognied: ,DialogOptionSelected,$option == scientistRecognied,,"
""So you still remember , that is refreshing. I can’t simply say how thankful I am to you for sending me that specific Alpha Core. With it I have decoded lost knowledge of Domain’s past. And now as my token of gratitude I would like to help you in your endeavors of rediscovering Domain’s lost secrets. What do you think about my offer ?"" 
","opScientistAgree:Accept Propostion 
opScientistInfo:See skills of that scientist
aotdReturn:Decline ,and leave the bar",
scientistNotRecognied: ,DialogOptionSelected,$option == scientistNotRecognied,,"""Well can’t blame you , a lot of time passed since i hired you to retrieve that Technology Cache. I hope that the rest of the cache's content was useful for you. I was that one scientist back then who hired you to retrieve a special Alpha Core, which helped me to decipher lost knowledge of Domain’s Past. And now as my token of gratitude I would like to help you in your endeavors of rediscovering Domain’s lost secrets. What do you think about my offer?""","opScientistAgree:Accept Propostion 
opScientistInfo:See skills of that scientist 
aotdReturn:Decline ,and leave the bar",
opScientistAgree,DialogOptionSelected,$option == opScientistAgree,"OpScientistAgreed  
AddTextSmall ""$personName joined your faction"" highlight",,aotdReturn: Leave the bar,
opScientistInfo,DialogOptionSelected,$option == opScientistInfo,"AddTextSmall ""Skill - Seeker of Knowledge."" highlight
AddTextSmall  ""Negate need for special type of databanks for research, but increase amount of days to research technologies that requieres special databank three times more"" highlight
",,,
#BIFROST SECTION,,,,,,
,,,,,,
bifrostAccess,OpenInteractionDialog,$customType == bifrost_gate score:1000,"SetShortcut defaultLeave ESCAPE  
SetEnabled bifrostUse false
FireBest bifrostCanBeUsed","A dull hum begins to sound in your ear, emanating from the gate as space-time begins to rumble and roil. The dull interior of the gigantic ring slowly lightens, unnatural purple light drifting inwards even as the humming begins to rise in tempo, rising a roar. Waves and distortions, barely visible from a distance echo from the structure, sensor reports streaming in about conflicting celestial objects, before it reaches a crescendo, in a tide, space normalizes and a tunnel in reality itself completes forming, giving a complete glimpse to the other side.

The Bifrost bridge has opened…","0:bifrostUse:Use Bifrost Network
1:defaultLeave:Leave",
bifrostUse,DialogOptionSelected,$option == bifrostUse,BiFrostCMD selectDestination,,,
bifrostCanBeUsed,bifrostCanBeUsed,"$used==false
$cooldown <=0
$supplied == true",SetEnabled bifrostUse true,,,
#BEYOND VEIL,,,,,,
veil_open_dialog,OpenInteractionDialog,$aotd_quest_veil score:1000,"SalvageGenFromSeed
ShowDefaultVisual
FireBest SalvageCheckHostile","Your $shipOrFleet approaches $entityName.

The sensors are having a hard time evaluating the tenuous megastructure enveloping its entire surface. Your sensors officer takes the initiative and applies some exotic parameters to the interferometer feed; inputs go green and a few seconds later the sub-AI tentatively identifies a stable planetary-scale energy field with highly unusual properties.",,
veil_defenderDesc,TriggerAutomatedDefenses,$aotd_quest_veil score:1000,SalvageDefenderInteraction,"As your fleet moves in closer, sensors detect multiple contacts rising up from the depths of the planet",,
veil_continueAfterDefeating,BeatDefendersContinue,$aotd_quest_veil score:1000,,Your fleet finishes its approach to $entityName without further incident.,0:salBeatDefendersContinue:Continue,
veil_beatDefenders,BeginSalvage,$aotd_quest_veil score:1000,SetShortcut defaultLeave ESCAPE,The transmission is set on repeat and garbled in ways that are indicative of aging equipment. You make out enough to gather that part of a research team was stranded here - at a secret Tri-Tachyon research facility - after the fully automated defenses over-weighed certain executive security contingency orders in the wake of one of the AI Wars and decided it was now imperative to shoot down any craft attempting to leave the planet.,"0:veil_explore:Send a salvage team down to the facility
100:defaultLeave:Leave",
veil_exploreFacility,DialogOptionSelected,$option == veil_explore,,"A tiny shuttle with a jury-rigged shield generator darts through a spot failure in the shield. A landing at the primary control center is achieved without incident and the crew is able to deactivate the shield entirely upon breaching the facility. Follow-up shuttles with heavier equipment launch quickly thereafter, and soon the salvage operation is in full swing.",0:veil_salvage:Pick through the salvage,
veil_salvage,DialogOptionSelected,$option == veil_salvage,BeyondQuest genLoot,,,
,,,,,,
,,,,,,
#Pre collapse facility,,,,,,
preCollapse_fac,PopulateOptions,"$market.isSurveyed
$market.isPlanetConditionMarketOnly
$market.mc:pre_collapse_facility
!$market.aotd_fac_explored
!$tag:gas_giant","FireBest DissablePreCollapseFacilityWhenNeeded 
SalvageGenFromSeed
ShowDefaultVisual
FireBest SalvageCheckHostile","This planet possess a massive facility, that seems to be a reserarch facility. Scan indicate, that this facility was once one of main centers of research, before Collapse. Our crew suggest, that here we might find some intresting things.",6:preExplore:Venture into Facility,
preCollapse_hostileNearby,DisableRuinsExploreIfNeeded,HostileFleetNearbyAndAware,SetEnabled preExplore false,"A nearby hostile fleet is tracking your movements, making exploration of the planet impossible.",,
preCollapse_noHostileNearby,DisableRuinsExploreIfNeeded,!HostileFleetNearbyAndAware,SetEnabled preExplore true,"While long-term exploitation of the resources in these ruins requires a colony, a salvage team can conduct a search for anything of immediate value.",,
preCollapse_explore,TriggerAutomatedDefenses,"$market.isSurveyed
$market.isPlanetConditionMarketOnly
$market.mc:pre_collapse_facility
!$market.aotd_fac_explored
!$tag:gas_giant",SalvageDefenderInteraction,"As your fleet moves in closer, sensors detect multiple contacts rising up from the depths of the planet",,
preCollapse_continiueAfterDefeating,BeatDefendersContinue,,SetShortcut defaultLeave ESCAPE,"Now, that defenders has been defeated  our path to facility is cleared",0:salBeatDefendersContinue:Continue,
preCollapse_beatDefenders,BeginSalvage,"$market.isSurveyed
$market.isPlanetConditionMarketOnly
$market.mc:pre_collapse_facility
!$market.aotd_fac_explored
!$tag:gas_giant",SetShortcut defaultLeave ESCAPE,,"0:explore_PreFac:Send a salvage team down to the facility
100:defaultLeave:Leave",
explore_PreFacility,DialogOptionSelected,$option == explore_PreFac,,,0:pre_salvage:Pick through the salvage,
preSalvage,DialogOptionSelected,$option == pre_salvage,"PreCollapseFacLoot genLoot 
$market.aotd_fac_explored = true",,,
,,,,,,
#Galatia comming with offer,,,,,,
aotd_galatia_offer,GAPostOpen,"$id == station_galatia_academy 
!$global.aotd_offer 
$global.has_built_first_facility score :10000",,"While enetring Galatia, you are being guided to giant room, that seems to be main haul of this station. There is one person waiting for you in corner.",aotdGalatiaOffer:Follow,
aotd_galatia_offer_more_info,DialogOptionSelected,$option == aotdGalatiaOffer,"SaveCurrentVisual
BeginConversation galatiaScientist ","Grettings starfarer. Our Council have noticed, that your faction recently started to grasp technology, necessary to run efficient colonies. We as council have offer for you. We will provide you with all basic databanks, necessary to start up colonies, but in return we would like to use your services.",aotdGalatiaOfferQuestion: How much this service will cost?,
aotd_galatia_offer_details,DialogOptionSelected,$option == aotdGalatiaOfferQuestion,GalatiaOfferQuest showPlanet,"""Basically we ask you to retrieve very important data core, that has been lost on one of planets during our expedition. On tripad you will see it's location. Do you wish to help us ?","aotdGalatiaOfferAgreed:Yes
aotdGalatiaOfferRefused:No",
aotd_galatia_accept,DialogOptionSelected,$option == aotdGalatiaOfferAgreed,"EndConversation 
RestoreSavedVisual
$global.aotd_offer=true
GalatiaOfferQuest acceptedQuest","That's the spirit, return with this core, and you shall be rewarded.",,
aotd_galatia_refuse,DialogOptionSelected,$option == aotdGalatiaOfferRefused,"EndConversation 
RestoreSavedVisual
$global.aotd_offer=true
GalatiaOfferQuest rejectedQuest",,,
galatia_planet_databank_init,OpenInteractionDialog,$aotd_galatia_planet score:1000,"SalvageGenFromSeed
ShowDefaultVisual
FireBest SalvageCheckHostile","When you apporach planet, your sensors are detecting abbandoned facility , where data core should be located.",,
galatia_planet_defenderDesc,TriggerAutomatedDefenses,$aotd_galatia_planet score:1000,SalvageDefenderInteraction,"As your fleet moves in closer, sensors detect multiple contacts rising up from the depths of the planet",,
galatia_planet_continueAfterDefeating,BeatDefendersContinue,$aotd_galatia_planet score:1000,,Your fleet finishes its approach to abbandoned facility.,0:salBeatDefendersContinue:Continue,
galatia_planet_explore,BeginSalvage,$aotd_galatia_planet score:1000,"SetShortcut defaultLeave ESCAPE
",,"0:gal_explore:Send a salvage team down to the facility and retrieve data
100:defaultLeave:Leave",
galatia_salvage,DialogOptionSelected,$option == gal_explore,"$global.aotd_got_core = true
GalatiaOfferQuest scavenge",,100:defaultLeave:Leave Facility with Data Core,
galatia_completed,GAPostOpen,"$id == station_galatia_academy 
!$global.aotd_got_databank
$global.aotd_got_core 
$global.aotd_offer score :10000","SaveCurrentVisual
BeginConversation galatiaScientist ","Greeting, starfarer. I assume you got a data core right?",0:galatia_give_core:Give data core to scientist,
galatia_give_data_core,DialogOptionSelected,$option == galatia_give_core,,"Congratulations, we are thankful for your services, here is your reward, access to these databanks.",0:galatia_reward: Claim your reward,
galatia_take_reward,DialogOptionSelected,$option == galatia_reward,"EndConversation 
RestoreSavedVisual
GalatiaGenLoot genLoot
AddTextSmall ""Recieved Galatia Databanks"" highlight
$global.aotd_got_databank = true",,100:defaultLeave:Leave,
